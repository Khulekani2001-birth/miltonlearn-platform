<!doctype html>
<html lang="en" class="h-100">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book a Session · MiltonLearn</title>
    <meta name="description" content="Book personalized session with MiltonLearn. Get customized support in Math, Physics, Computer Science, Chemistry, and Biology.">

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-E4Y24C156P"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-E4Y24C156P');
    </script>

    <!-- Styles -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="logo.png">
    <link rel="stylesheet" href="css/style.css">

    <style>
      .form-container {
        background: white;
        border-radius: 16px;
        padding: 2.5rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        margin-bottom: 2rem;
      }

      .benefit-card {
        background: linear-gradient(135deg, #f8f9fa, #ffffff);
        border-left: 4px solid var(--warning);
        padding: 1.5rem;
        border-radius: 8px;
        margin-bottom: 1rem;
        transition: all 0.3s ease;
      }

      .benefit-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .time-checkbox {
        display: inline-block;
        margin-right: 1rem;
        margin-bottom: 0.5rem;
      }

      .section-divider {
        border-top: 2px solid #e9ecef;
        margin: 2rem 0;
      }
    </style>

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Service",
        "serviceType": "Educational Assistance",
        "provider": {
          "@type": "TechCompany",
          "name": "MiltonLearn",
          "url": "https://www.miltonlearn.com"
        },
        "areaServed": "Worldwide",
        "availableChannel": {
          "@type": "ServiceChannel",
          "serviceUrl": "https://www.miltonlearn.com/request_tutor.html"
        }
      }
    </script>
  </head>

<body class="d-flex flex-column h-100">
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg sticky-top">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center" href="/index.html">
        <img src="logo.png" alt="MiltonLearn Logo">
        <span class="brand-text">MiltonLearn</span>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link fw-semibold" href="https://www.mamtutor.com" target="_blank">
              <i class="bi bi-robot me-2"></i>MAMTutor
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link fw-semibold" href="/about.html">About Us</a>
          </li>
          <li class="nav-item">
            <a class="nav-link btn btn-success text-white px-3 ms-2" href="/request_services.html">
              <i class="bi bi-stars me-1"></i>Request Service
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <section class="py-5">
    <div class="container">
      <div class="row justify-content-center">
        <!-- Booking Form -->
        <div class="col-lg-10 col-xl-9">
          <div class="form-container">
            <div class="text-center mb-4">
              <h2 class="h3 fw-bold mb-3">Book Your Session</h2>
              <p class="text-muted">Fill out the form below and get started</p>
              <div class="alert alert-info d-inline-block mb-3">
                <i class="bi bi-laptop me-1"></i><strong>Online sessions</strong> •
                <i class="bi bi-geo-alt me-1 ms-2"></i>Library meetings in Manzini & Mbabane upon request
              </div>
              <div class="mb-3">
                <a href="/tutoring_pricing.html" class="btn btn-warning btn-lg">
                  <i class="bi bi-currency-dollar me-2"></i>View Pricing & Packages
                </a>
              </div>
              <p class="text-muted mb-4">
                <i class="bi bi-telephone me-2"></i><a href="tel:+26878404553">+268 7840 4553</a> •
                <i class="bi bi-envelope me-2"></i><a href="mailto:info@miltonlearn.com">info@miltonlearn.com</a>
              </p>
            </div>

            <form id="tutoringForm" class="needs-validation" novalidate>
              <!-- Parent/Guardian Information Section -->
              <div class="mb-4">
                <h5 class="text-primary mb-3"><i class="bi bi-person-badge me-2"></i>Parent/Guardian Information</h5>
                <div class="row g-3">
                  <div class="col-md-6">
                    <label for="parentName" class="form-label fw-semibold">
                      Parent/Guardian Name <span class="text-danger">*</span>
                    </label>
                    <input type="text" class="form-control" id="parentName" name="parentName" required placeholder="Full name">
                    <div class="invalid-feedback">Please provide parent/guardian name.</div>
                  </div>

                  <div class="col-md-6">
                    <label for="parentPhone" class="form-label fw-semibold">
                      Phone Number <span class="text-danger">*</span>
                    </label>
                    <input type="tel" class="form-control" id="parentPhone" name="parentPhone" required placeholder="+268 7840 4553">
                    <div class="form-text">Include country code for WhatsApp contact</div>
                    <div class="invalid-feedback">Please provide a phone number.</div>
                  </div>

                  <div class="col-md-6">
                    <label for="parentEmail" class="form-label fw-semibold">
                      Email Address <span class="text-muted">(Optional)</span>
                    </label>
                    <input type="email" class="form-control" id="parentEmail" name="parentEmail" placeholder="your.email@example.com">
                  </div>
                </div>
              </div>

              <div class="section-divider"></div>

              <!-- Student Information Section -->
              <div class="mb-4">
                <h5 class="text-primary mb-3"><i class="bi bi-person-circle me-2"></i>Student Information</h5>
                <div class="row g-3">
                  <div class="col-md-6">
                    <label for="studentName" class="form-label fw-semibold">
                      Student Name <span class="text-danger">*</span>
                    </label>
                    <input type="text" class="form-control" id="studentName" name="studentName" required placeholder="Full name">
                    <div class="invalid-feedback">Please provide the student's name.</div>
                  </div>

                  <div class="col-md-6">
                    <label for="gradeLevel" class="form-label fw-semibold">
                      Grade/Level <span class="text-danger">*</span>
                    </label>
                    <select class="form-select" id="gradeLevel" name="gradeLevel" required>
                      <option value="" selected disabled>Select level...</option>
                      <option value="Grade 8-9">Grade 8-9</option>
                      <option value="Grade 10-12 (IGCSE/O-Level)">Grade 10-12 (IGCSE/O-Level)</option>
                      <option value="AS/A-Level">AS/A-Level</option>
                      <option value="University/College (Undergraduate)">University/College (Undergraduate)</option>
                      <option value="University/College (Postgraduate)">University/College (Postgraduate)</option>
                      <option value="Adult Learner">Adult Learner</option>
                    </select>
                    <div class="invalid-feedback">Please select a grade level.</div>
                  </div>

                  <div class="col-md-6">
                    <label for="studentPhone" class="form-label fw-semibold">
                      Phone Number <span class="text-muted">(Optional)</span>
                    </label>
                    <input type="tel" class="form-control" id="studentPhone" name="studentPhone" placeholder="+268 7840 4553">
                  </div>

                  <div class="col-md-6">
                    <label for="studentEmail" class="form-label fw-semibold">
                      Email Address <span class="text-muted">(Optional)</span>
                    </label>
                    <input type="email" class="form-control" id="studentEmail" name="studentEmail" placeholder="student.email@example.com">
                  </div>
                </div>
              </div>

              <div class="section-divider"></div>

              <!-- Subject Selection -->
              <div class="mb-4">
                <h5 class="text-primary mb-3"><i class="bi bi-book me-2"></i>Subject</h5>
                <div class="row g-3">
                  <div class="col-12">
                    <label for="subject" class="form-label fw-semibold">
                      Which subject do you need help with? <span class="text-danger">*</span>
                    </label>
                    <select class="form-select" id="subject" name="subject" required>
                      <option value="" selected disabled>Choose subject...</option>
                      <option value="Mathematics">Mathematics</option>
                      <option value="Physics">Physics</option>
                      <option value="Chemistry">Chemistry</option>
                      <option value="Biology">Biology</option>
                      <option value="Computer Science">Computer Science</option>
                      <option value="Programming">Programming</option>
                      <option value="Statistics">Statistics</option>
                      <option value="Multiple Subjects">Multiple Subjects</option>
                      <option value="Other">Other</option>
                    </select>
                    <div class="invalid-feedback">Please select a subject.</div>
                  </div>
                </div>
              </div>

              <div class="section-divider"></div>

              <!-- Scheduling Preferences -->
              <div class="mb-4">
                <h5 class="text-primary mb-3"><i class="bi bi-calendar-check me-2"></i>Preferred Times</h5>
                <label class="form-label fw-semibold mb-3">
                  What times work best for you? <span class="text-muted">(Select all that apply)</span>
                </label>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-check time-checkbox">
                      <input class="form-check-input" type="checkbox" value="Weekday Mornings" id="time1" name="preferredTimes">
                      <label class="form-check-label" for="time1">Weekday Mornings (8am-12pm)</label>
                    </div>
                    <div class="form-check time-checkbox">
                      <input class="form-check-input" type="checkbox" value="Weekday Afternoons" id="time2" name="preferredTimes">
                      <label class="form-check-label" for="time2">Weekday Afternoons (12pm-5pm)</label>
                    </div>
                    <div class="form-check time-checkbox">
                      <input class="form-check-input" type="checkbox" value="Weekday Evenings" id="time3" name="preferredTimes">
                      <label class="form-check-label" for="time3">Weekday Evenings (5pm-9pm)</label>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-check time-checkbox">
                      <input class="form-check-input" type="checkbox" value="Weekend Mornings" id="time4" name="preferredTimes">
                      <label class="form-check-label" for="time4">Weekend Mornings (8am-12pm)</label>
                    </div>
                    <div class="form-check time-checkbox">
                      <input class="form-check-input" type="checkbox" value="Weekend Afternoons" id="time5" name="preferredTimes">
                      <label class="form-check-label" for="time5">Weekend Afternoons (12pm-5pm)</label>
                    </div>
                    <div class="form-check time-checkbox">
                      <input class="form-check-input" type="checkbox" value="Flexible" id="time6" name="preferredTimes">
                      <label class="form-check-label" for="time6">Flexible/Any time</label>
                    </div>
                  </div>
                </div>
              </div>

              <div class="section-divider"></div>

              <!-- Message -->
              <div class="mb-4">
                <label for="message" class="form-label fw-semibold">
                  Additional Information <span class="text-muted">(Optional)</span>
                </label>
                <textarea class="form-control" id="message" name="message" rows="4"
                  placeholder="Any specific topics, learning goals, or other details you'd like to share..."></textarea>
                <div class="form-text">Tell us more about what you need help with</div>
              </div>

              <!-- Submit Button -->
              <div class="text-center mt-4">
                <button type="submit" class="btn btn-warning btn-lg px-5">
                  <i class="bi bi-calendar-check me-2"></i>Book Session
                </button>
                <p class="text-muted mt-3 mb-0">
                  <small>
                    <i class="bi bi-clock-history me-1"></i>
                    We'll contact you within 24 hours to discuss session details, scheduling, and pricing
                  </small>
                </p>
              </div>
            </form>

            <div id="loadingSpinner" class="text-center mt-4" style="display: none;">
              <div class="spinner-border text-warning" role="status">
                <span class="visually-hidden">Sending...</span>
              </div>
              <p class="text-muted mt-2">Submitting your request...</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="mt-auto">
    <div class="container">
      <div class="row g-4">
        <div class="col-md-6 text-center text-md-start">
          <h5 class="mb-3">Contact</h5>
          <p class="mb-2">
            <i class="bi bi-telephone me-2"></i>
            <a href="tel:+26878404553">+268 7840 4553</a>
            <small class="text-muted">(WhatsApp available)</small>
          </p>
          <p class="mb-2">
            <i class="bi bi-envelope me-2"></i>
            <a href="mailto:info@miltonlearn.com">info@miltonlearn.com</a>
          </p>
        </div>
        <div class="col-md-6 text-center text-md-end">
          <h5 class="mb-3">Follow Us</h5>
          <div class="social-links">
            <a href="https://www.facebook.com/miltonlearn/" target="_blank" title="Facebook">
              <i class="bi bi-facebook"></i>
            </a>
            <a href="https://www.instagram.com/miltonlearn/" target="_blank" title="Instagram">
              <i class="bi bi-instagram"></i>
            </a>
            <a href="https://www.linkedin.com/company/miltonlearn" target="_blank" title="LinkedIn">
              <i class="bi bi-linkedin"></i>
            </a>
          </div>
        </div>
      </div>
      <hr class="my-4">
      <p class="text-center mb-0">
        © <span id="current-year"></span> MiltonLearn. AI-Powered Education. All rights reserved.
      </p>
    </div>
  </footer>

  <!-- Success Modal -->
  <div class="modal fade" id="successModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content border-0 shadow-lg">
        <div class="modal-body text-center p-5">
          <div class="mb-4">
            <i class="bi bi-check-circle-fill text-success" style="font-size: 4rem;"></i>
          </div>
          <h3 class="fw-bold mb-3">Request Submitted!</h3>
          <p class="text-muted mb-4">
            Thank you for choosing MiltonLearn. Our team will contact you within 24 hours to discuss session details, scheduling, and pricing.
          </p>
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

  <!-- EmailJS -->
  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>

  <script>
    // Initialize EmailJS
    (function(){
      emailjs.init("37JYNPRfsiVRfJeAv");
    })();

    // Set current year
    document.addEventListener('DOMContentLoaded', function() {
      const currentYearElement = document.getElementById('current-year');
      if (currentYearElement) {
        currentYearElement.textContent = new Date().getFullYear();
      }
    });

    // Form validation and submission
    document.addEventListener('DOMContentLoaded', function() {
      'use strict';

      const form = document.getElementById('tutoringForm');
      const loadingSpinner = document.getElementById('loadingSpinner');

      if (!form) {
        console.error('Form not found');
        return;
      }

      form.addEventListener('submit', function (event) {
        event.preventDefault();
        event.stopPropagation();

        if (form.checkValidity()) {
          sendEmail();
        } else {
          form.classList.add('was-validated');
        }

        return false;
      }, false);

      function sendEmail() {
        if (loadingSpinner) {
          loadingSpinner.style.display = 'block';
        }

        // Get preferred times checkboxes
        const preferredTimesCheckboxes = document.querySelectorAll('input[name="preferredTimes"]:checked');
        const preferredTimesArray = Array.from(preferredTimesCheckboxes).map(cb => cb.value);
        const preferredTimesString = preferredTimesArray.length > 0 ? preferredTimesArray.join(', ') : 'Not specified';

        // Get form values
        const parentName = document.getElementById('parentName')?.value || '';
        const parentPhone = document.getElementById('parentPhone')?.value || '';
        const parentEmail = document.getElementById('parentEmail')?.value || '';
        const studentName = document.getElementById('studentName')?.value || '';
        const studentPhone = document.getElementById('studentPhone')?.value || '';
        const studentEmail = document.getElementById('studentEmail')?.value || '';
        const gradeLevel = document.getElementById('gradeLevel')?.value || '';
        const subject = document.getElementById('subject')?.value || '';
        const additionalInfo = document.getElementById('message')?.value || '';

        // Format all details into a message for the contact form template
        const formattedMessage = `
TUTORING REQUEST

PARENT/GUARDIAN INFORMATION:
Name: ${parentName}
Phone: ${parentPhone}
Email: ${parentEmail || 'Not provided'}

STUDENT INFORMATION:
Name: ${studentName}
Grade/Level: ${gradeLevel}
Phone: ${studentPhone || 'Not provided'}
Email: ${studentEmail || 'Not provided'}

SESSION DETAILS:
Subject: ${subject}
Preferred Times: ${preferredTimesString}

Additional Information:
${additionalInfo || 'None provided'}

Submitted: ${new Date().toLocaleString()}
        `.trim();

        // Use contact form template with formatted message
        const templateParams = {
          from_name: parentName,
          reply_to: parentEmail || parentPhone,
          subject: 'Tutoring Request',
          message: formattedMessage
        };

        // Send email using the same template as contact form
        emailjs.send('service_jytz61d', 'template_lcunkpm', templateParams)
          .then(function(response) {
            console.log('Email sent successfully:', response);
            if (loadingSpinner) {
              loadingSpinner.style.display = 'none';
            }

            // Show success modal
            const successModal = new bootstrap.Modal(document.getElementById('successModal'));
            successModal.show();

            // Reset form
            form.reset();
            form.classList.remove('was-validated');
          })
          .catch(function(error) {
            console.error('Booking request sending failed:', error);
            if (loadingSpinner) {
              loadingSpinner.style.display = 'none';
            }
            alert('Failed to submit your booking request. Please try again or contact us directly at info@miltonlearn.com or call +268 7840 4553.');
          });
      }
    });
  </script>
</body>
</html>
